Last login: Tue Dec 30 19:36:56 2025 from 188.48.194.221
root@vmi2695527:~# # تثبيت Nginx و Certbot
apt update && apt install nginx certbot python3-certbot-nginx -y

# إنشاء إعدادات Nginx
cat > /etc/nginx/sites-available/signage << 'EOF'
server {
    listen 80;
    server_name meror.net www.meror.net;

    client_max_body_size 100M;

    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
EOF

as0505@gmail.com-d meror.net -d www.meror.net --non-interactive --agree-tos -m i
Hit:1 http://asi-fs-n.contabo.net/ubuntu jammy InRelease
Get:2 http://asi-fs-n.contabo.net/ubuntu jammy-updates InRelease [128 kB]
Get:3 http://asi-fs-n.contabo.net/ubuntu jammy-backports InRelease [127 kB]
Hit:4 https://deb.nodesource.com/node_20.x nodistro InRelease
Get:5 http://security.ubuntu.com/ubuntu jammy-security InRelease [129 kB]
Fetched 384 kB in 1s (405 kB/s)
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
All packages are up to date.
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
nginx is already the newest version (1.18.0-6ubuntu14.7).
The following packages were automatically installed and are no longer required:
  apache2-data apache2-utils linux-headers-5.15.0-25
  linux-headers-5.15.0-25-generic linux-image-5.15.0-25-generic
  linux-modules-5.15.0-25-generic linux-modules-extra-5.15.0-25-generic
Use 'apt autoremove' to remove them.
The following additional packages will be installed:
  python3-acme python3-certbot python3-certifi python3-chardet
  python3-configargparse python3-configobj python3-cryptography python3-icu
  python3-idna python3-josepy python3-openssl python3-parsedatetime
  python3-pyparsing python3-requests python3-requests-toolbelt python3-rfc3339
  python3-tz python3-urllib3 python3-zope.component python3-zope.event
  python3-zope.hookable python3-zope.interface
Suggested packages:
  python-certbot-doc python3-certbot-apache python-acme-doc
  python-certbot-nginx-doc python-configobj-doc python-cryptography-doc
  python3-cryptography-vectors python-openssl-doc python3-openssl-dbg
  python-pyparsing-doc python3-socks python-requests-doc
The following NEW packages will be installed:
  certbot python3-acme python3-certbot python3-certbot-nginx python3-certifi
  python3-chardet python3-configargparse python3-configobj
  python3-cryptography python3-icu python3-idna python3-josepy python3-openssl
  python3-parsedatetime python3-pyparsing python3-requests
  python3-requests-toolbelt python3-rfc3339 python3-tz python3-urllib3
  python3-zope.component python3-zope.event python3-zope.hookable
  python3-zope.interface
0 upgraded, 24 newly installed, 0 to remove and 0 not upgraded.
Need to get 1,991 kB of archives.
After this operation, 11.0 MB of additional disk space will be used.
Get:1 http://asi-fs-n.contabo.net/ubuntu jammy-updates/main amd64 python3-cryptography amd64 3.4.8-1ubuntu2.2 [236 kB]
Get:2 http://asi-fs-n.contabo.net/ubuntu jammy/main amd64 python3-openssl all 21.0.0-1 [45.2 kB]
Get:3 http://asi-fs-n.contabo.net/ubuntu jammy/universe amd64 python3-josepy all 1.10.0-1 [22.0 kB]
Get:4 http://asi-fs-n.contabo.net/ubuntu jammy/main amd64 python3-certifi all 2020.6.20-1 [150 kB]
Get:5 http://asi-fs-n.contabo.net/ubuntu jammy/main amd64 python3-chardet all 4.0.0-1 [98.0 kB]
Get:6 http://asi-fs-n.contabo.net/ubuntu jammy-updates/main amd64 python3-idna all 3.3-1ubuntu0.1 [52.1 kB]
Get:7 http://asi-fs-n.contabo.net/ubuntu jammy-updates/main amd64 python3-urllib3 all 1.26.5-1~exp1ubuntu0.4 [98.6 kB]
Get:8 http://asi-fs-n.contabo.net/ubuntu jammy-updates/main amd64 python3-requests all 2.25.1+dfsg-2ubuntu0.3 [48.8 kB]
Get:9 http://asi-fs-n.contabo.net/ubuntu jammy/main amd64 python3-requests-toolbelt all 0.9.1-1 [38.0 kB]
Get:10 http://asi-fs-n.contabo.net/ubuntu jammy-updates/main amd64 python3-tz all 2022.1-1ubuntu0.22.04.1 [30.7 kB]
Get:11 http://asi-fs-n.contabo.net/ubuntu jammy/main amd64 python3-rfc3339 all 1.1-3 [7,110 B]
Get:12 http://asi-fs-n.contabo.net/ubuntu jammy-updates/universe amd64 python3-acme all 1.21.0-1ubuntu0.1 [36.4 kB]
Get:13 http://asi-fs-n.contabo.net/ubuntu jammy/universe amd64 python3-configargparse all 1.5.3-1 [26.9 kB]
Get:14 http://asi-fs-n.contabo.net/ubuntu jammy-updates/main amd64 python3-configobj all 5.0.6-5ubuntu0.1 [34.9 kB]
Get:15 http://asi-fs-n.contabo.net/ubuntu jammy/universe amd64 python3-parsedatetime all 2.6-2 [32.9 kB]
Get:16 http://asi-fs-n.contabo.net/ubuntu jammy/universe amd64 python3-zope.hookable amd64 5.1.0-1build1 [11.6 kB]
Get:17 http://asi-fs-n.contabo.net/ubuntu jammy/main amd64 python3-zope.interface amd64 5.4.0-1build1 [142 kB]
Get:18 http://asi-fs-n.contabo.net/ubuntu jammy/universe amd64 python3-zope.event all 4.4-3 [8,180 B]
Get:19 http://asi-fs-n.contabo.net/ubuntu jammy/universe amd64 python3-zope.component all 4.3.0-3 [38.3 kB]
Get:20 http://asi-fs-n.contabo.net/ubuntu jammy/universe amd64 python3-certbot all 1.21.0-1build1 [175 kB]
Get:21 http://asi-fs-n.contabo.net/ubuntu jammy/universe amd64 certbot all 1.21.0-1build1 [21.3 kB]
Get:22 http://asi-fs-n.contabo.net/ubuntu jammy/main amd64 python3-pyparsing all 2.4.7-1 [61.4 kB]
Get:23 http://asi-fs-n.contabo.net/ubuntu jammy/universe amd64 python3-certbot-nginx all 1.21.0-1 [35.4 kB]
Get:24 http://asi-fs-n.contabo.net/ubuntu jammy/main amd64 python3-icu amd64 2.8.1-0ubuntu2 [540 kB]
Fetched 1,991 kB in 0s (21.7 MB/s)
Preconfiguring packages ...
Selecting previously unselected package python3-cryptography.
(Reading database ... 154862 files and directories currently installed.)
Preparing to unpack .../00-python3-cryptography_3.4.8-1ubuntu2.2_amd64.deb ...
Unpacking python3-cryptography (3.4.8-1ubuntu2.2) ...
Selecting previously unselected package python3-openssl.
Preparing to unpack .../01-python3-openssl_21.0.0-1_all.deb ...
Unpacking python3-openssl (21.0.0-1) ...
Selecting previously unselected package python3-josepy.
Preparing to unpack .../02-python3-josepy_1.10.0-1_all.deb ...
Unpacking python3-josepy (1.10.0-1) ...
Selecting previously unselected package python3-certifi.
Preparing to unpack .../03-python3-certifi_2020.6.20-1_all.deb ...
Unpacking python3-certifi (2020.6.20-1) ...
Selecting previously unselected package python3-chardet.
Preparing to unpack .../04-python3-chardet_4.0.0-1_all.deb ...
Unpacking python3-chardet (4.0.0-1) ...
Selecting previously unselected package python3-idna.
Preparing to unpack .../05-python3-idna_3.3-1ubuntu0.1_all.deb ...
Unpacking python3-idna (3.3-1ubuntu0.1) ...
Selecting previously unselected package python3-urllib3.
Preparing to unpack .../06-python3-urllib3_1.26.5-1~exp1ubuntu0.4_all.deb ...
Unpacking python3-urllib3 (1.26.5-1~exp1ubuntu0.4) ...
Selecting previously unselected package python3-requests.
Preparing to unpack .../07-python3-requests_2.25.1+dfsg-2ubuntu0.3_all.deb ...
Unpacking python3-requests (2.25.1+dfsg-2ubuntu0.3) ...
Selecting previously unselected package python3-requests-toolbelt.
Preparing to unpack .../08-python3-requests-toolbelt_0.9.1-1_all.deb ...
Unpacking python3-requests-toolbelt (0.9.1-1) ...
Selecting previously unselected package python3-tz.
Preparing to unpack .../09-python3-tz_2022.1-1ubuntu0.22.04.1_all.deb ...
Unpacking python3-tz (2022.1-1ubuntu0.22.04.1) ...
Selecting previously unselected package python3-rfc3339.
Preparing to unpack .../10-python3-rfc3339_1.1-3_all.deb ...
Unpacking python3-rfc3339 (1.1-3) ...
Selecting previously unselected package python3-acme.
Preparing to unpack .../11-python3-acme_1.21.0-1ubuntu0.1_all.deb ...
Unpacking python3-acme (1.21.0-1ubuntu0.1) ...
Selecting previously unselected package python3-configargparse.
Preparing to unpack .../12-python3-configargparse_1.5.3-1_all.deb ...
Unpacking python3-configargparse (1.5.3-1) ...
Selecting previously unselected package python3-configobj.
Preparing to unpack .../13-python3-configobj_5.0.6-5ubuntu0.1_all.deb ...
Unpacking python3-configobj (5.0.6-5ubuntu0.1) ...
Selecting previously unselected package python3-parsedatetime.
Preparing to unpack .../14-python3-parsedatetime_2.6-2_all.deb ...
Unpacking python3-parsedatetime (2.6-2) ...
Selecting previously unselected package python3-zope.hookable.
Preparing to unpack .../15-python3-zope.hookable_5.1.0-1build1_amd64.deb ...
Unpacking python3-zope.hookable (5.1.0-1build1) ...
Selecting previously unselected package python3-zope.interface.
Preparing to unpack .../16-python3-zope.interface_5.4.0-1build1_amd64.deb ...
Unpacking python3-zope.interface (5.4.0-1build1) ...
Selecting previously unselected package python3-zope.event.
Preparing to unpack .../17-python3-zope.event_4.4-3_all.deb ...
Unpacking python3-zope.event (4.4-3) ...
Selecting previously unselected package python3-zope.component.
Preparing to unpack .../18-python3-zope.component_4.3.0-3_all.deb ...
Unpacking python3-zope.component (4.3.0-3) ...
Selecting previously unselected package python3-certbot.
Preparing to unpack .../19-python3-certbot_1.21.0-1build1_all.deb ...
Unpacking python3-certbot (1.21.0-1build1) ...
Selecting previously unselected package certbot.
Preparing to unpack .../20-certbot_1.21.0-1build1_all.deb ...
Unpacking certbot (1.21.0-1build1) ...
Selecting previously unselected package python3-pyparsing.
Preparing to unpack .../21-python3-pyparsing_2.4.7-1_all.deb ...
Unpacking python3-pyparsing (2.4.7-1) ...
Selecting previously unselected package python3-certbot-nginx.
Preparing to unpack .../22-python3-certbot-nginx_1.21.0-1_all.deb ...
Unpacking python3-certbot-nginx (1.21.0-1) ...
Selecting previously unselected package python3-icu.
Preparing to unpack .../23-python3-icu_2.8.1-0ubuntu2_amd64.deb ...
Unpacking python3-icu (2.8.1-0ubuntu2) ...
Setting up python3-configargparse (1.5.3-1) ...
Setting up python3-parsedatetime (2.6-2) ...
Setting up python3-icu (2.8.1-0ubuntu2) ...
Setting up python3-zope.event (4.4-3) ...
Setting up python3-zope.interface (5.4.0-1build1) ...
Setting up python3-tz (2022.1-1ubuntu0.22.04.1) ...
Setting up python3-zope.hookable (5.1.0-1build1) ...
Setting up python3-chardet (4.0.0-1) ...
Setting up python3-configobj (5.0.6-5ubuntu0.1) ...
Setting up python3-pyparsing (2.4.7-1) ...
Setting up python3-certifi (2020.6.20-1) ...
Setting up python3-cryptography (3.4.8-1ubuntu2.2) ...
Setting up python3-idna (3.3-1ubuntu0.1) ...
Setting up python3-urllib3 (1.26.5-1~exp1ubuntu0.4) ...
Setting up python3-rfc3339 (1.1-3) ...
Setting up python3-openssl (21.0.0-1) ...
Setting up python3-zope.component (4.3.0-3) ...
Setting up python3-requests (2.25.1+dfsg-2ubuntu0.3) ...
Setting up python3-josepy (1.10.0-1) ...
Setting up python3-requests-toolbelt (0.9.1-1) ...
Setting up python3-acme (1.21.0-1ubuntu0.1) ...
Setting up python3-certbot (1.21.0-1build1) ...
Setting up certbot (1.21.0-1build1) ...
Created symlink /etc/systemd/system/timers.target.wants/certbot.timer → /lib/systemd/system/certbot.timer.
Setting up python3-certbot-nginx (1.21.0-1) ...
Processing triggers for man-db (2.10.2-1) ...
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Account registered.
Requesting a certificate for meror.net and www.meror.net

Successfully received certificate.
Certificate is saved at: /etc/letsencrypt/live/meror.net/fullchain.pem
Key is saved at:         /etc/letsencrypt/live/meror.net/privkey.pem
This certificate expires on 2026-03-31.
These files will be updated when the certificate renews.
Certbot has set up a scheduled task to automatically renew this certificate in the background.

Deploying certificate
Successfully deployed certificate for meror.net to /etc/nginx/sites-enabled/signage
Successfully deployed certificate for www.meror.net to /etc/nginx/sites-enabled/signage
Congratulations! You have successfully enabled HTTPS on https://meror.net and https://www.meror.net

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
If you like Certbot, please consider supporting our work by:
 * Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
 * Donating to EFF:                    https://eff.org/donate-le
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
root@vmi2695527:~# cat > /etc/nginx/sites-available/signage << 'EOF'
server {
    listen 80;
    server_name meror.net www.meror.net;

    client_max_body_size 100M;

    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
EOF
root@vmi2695527:~# ln -s /etc/nginx/sites-available/signage /etc/nginx/sites-enabled/ 2>/dev/null
rm -f /etc/nginx/sites-enabled/default
nginx -t && systemctl restart nginx
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@vmi2695527:~# certbot --nginx -d meror.net -d www.meror.net --non-interactive --agree-tos -m ias0505@gmail.com
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Certificate not yet due for renewal
Deploying certificate
Successfully deployed certificate for meror.net to /etc/nginx/sites-enabled/signage
Successfully deployed certificate for www.meror.net to /etc/nginx/sites-enabled/signage
Congratulations! You have successfully enabled HTTPS on https://meror.net and https://www.meror.net

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
If you like Certbot, please consider supporting our work by:
 * Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
 * Donating to EFF:                    https://eff.org/donate-le
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
root@vmi2695527:~#
